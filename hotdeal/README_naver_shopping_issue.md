# 네이버 쇼핑 크롤링 문제 및 해결 방안

## 🚨 문제 상황
네이버 쇼핑에서 자동화된 크롤링을 차단하고 있어 가격 정보를 자동으로 가져올 수 없습니다.

### 오류 메시지
```
쇼핑 서비스 접속이 일시적으로 제한되었습니다.
네이버는 안정적인 쇼핑 서비스 제공하고자 시스템을 통해 아래와 같은 비정상적인 접근이 감지될 경우 해당 네트워크의 접속을 일시적으로 제한하고 있습니다.
```

## 🔍 원인 분석
1. **네이버의 강력한 크롤링 차단 시스템**
2. **DOM 구조 변경으로 인한 XPath 무효화**
3. **IP 기반 접속 제한**
4. **자동화 도구 감지**

## 💡 해결 방안

### 1. 임시 해결책 (현재 적용됨)
- 네이버 쇼핑 자동 크롤링 비활성화
- 수동 검색 링크 제공
- 사용자가 직접 가격 확인 가능

### 2. 장기 해결책

#### A. API 사용 (권장)
```python
# 네이버 쇼핑 API 사용 (공식 방법)
# 1. 네이버 개발자 센터에서 API 키 발급
# 2. Shopping API 사용
# 장점: 안정적, 공식 지원
# 단점: API 키 필요, 요청 제한
```

#### B. 프록시 로테이션
```python
# 여러 프록시 서버를 순환 사용
# 장점: IP 차단 우회 가능
# 단점: 비용 발생, 복잡성 증가
```

#### C. 헤드리스 브라우저 개선
```python
# Playwright 또는 undetected-chromedriver 사용
# 장점: 더 나은 우회 능력
# 단점: 여전히 차단 위험
```

#### D. 대안 쇼핑몰 활용
```python
# 다른 쇼핑몰의 가격 정보 활용
# - 쿠팡, 11번가, G마켓 등
# 장점: 차단 위험 낮음
# 단점: 네이버 쇼핑만큼 포괄적이지 않음
```

## 🛠️ 현재 상태
- ✅ 네이버 쇼핑 크롤링 임시 비활성화
- ✅ 수동 검색 링크 자동 생성
- ✅ 다른 쇼핑몰 크롤링은 정상 작동
- ✅ 카페 크롤링은 정상 작동

## 📋 사용자 액션 아이템

### 즉시 가능한 조치
1. **수동 가격 확인**: 생성된 네이버 쇼핑 링크를 클릭하여 수동으로 가격 확인
2. **다른 쇼핑몰 활용**: 쿠팡, 11번가 등 다른 쇼핑몰에서 가격 비교
3. **API 키 발급 검토**: 네이버 개발자 센터에서 Shopping API 키 발급 검토

### 장기적 개선 방안
1. **네이버 Shopping API 도입**
   - 네이버 개발자 센터 가입
   - Shopping API 신청
   - API 키 발급 후 코드 수정

2. **대안 가격 비교 사이트 추가**
   - 다나와, 에누리 등 가격 비교 사이트 크롤링 추가
   - 여러 소스에서 가격 정보 수집

3. **사용자 인터페이스 개선**
   - 수동 입력 기능 추가
   - 가격 정보 캐싱 기능 추가

## 🔧 코드 수정 사항

현재 `naver_shopping_crawler.py`에서 다음과 같이 수정되었습니다:

```python
def search_products_batch(self, product_names: List[str]) -> List[Dict]:
    """여러 상품 일괄 검색 - 임시 비활성화"""
    # 자동 크롤링 대신 수동 검색 링크 제공
    for product_name in product_names:
        search_query = urllib.parse.quote(product_name)
        manual_search_url = f"https://search.shopping.naver.com/search/all?query={search_query}"
        # 수동 검색 링크와 함께 결과 반환
```

## 📞 추가 지원
더 자세한 해결 방안이나 API 도입에 대한 도움이 필요하시면 언제든 문의해 주세요. 